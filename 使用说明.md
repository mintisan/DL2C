# MNISTæ¨¡å‹éƒ¨ç½²æ•™å­¦é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„MNISTæ‰‹å†™æ•°å­—è¯†åˆ«æ¨¡å‹éƒ¨ç½²æ•™å­¦é¡¹ç›®ï¼Œå±•ç¤ºäº†ä»PyTorchè®­ç»ƒåˆ°è·¨å¹³å°éƒ¨ç½²çš„å®Œæ•´æµç¨‹ã€‚

## é¡¹ç›®ç»“æ„

```
DL2C/
â”œâ”€â”€ train/                          # è®­ç»ƒç›¸å…³è„šæœ¬
â”‚   â”œâ”€â”€ train_model.py              # æ¨¡å‹è®­ç»ƒ
â”‚   â”œâ”€â”€ quantize_model.py           # æ¨¡å‹é‡åŒ–
â”‚   â””â”€â”€ export_onnx.py              # ONNXå¯¼å‡º
â”œâ”€â”€ inference/                      # æ¨ç†ç›¸å…³ä»£ç 
â”‚   â”œâ”€â”€ python_inference.py        # Pythonæ¨ç†ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ cpp_inference.cpp          # C++æ¨ç†ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ c_inference.c              # Cè¯­è¨€æ¨ç†ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ python_inference_common.py # Pythonæ¨ç†ï¼ˆå…±åŒæ•°æ®ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ cpp_inference_common.cpp   # C++æ¨ç†ï¼ˆå…±åŒæ•°æ®ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ c_inference_common.c       # Cè¯­è¨€æ¨ç†ï¼ˆå…±åŒæ•°æ®ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ python_inference_mnist.py  # Pythonæ¨ç†ï¼ˆçœŸå®MNISTç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ cpp_inference_mnist.cpp    # C++æ¨ç†ï¼ˆçœŸå®MNISTç‰ˆæœ¬ï¼‰
â”‚   â””â”€â”€ c_inference_mnist.c        # Cè¯­è¨€æ¨ç†ï¼ˆçœŸå®MNISTç‰ˆæœ¬ï¼‰
â”œâ”€â”€ build/                          # ç¼–è¯‘é…ç½®
â”‚   â””â”€â”€ CMakeLists.txt              # CMakeé…ç½®
â”œâ”€â”€ models/                         # æ¨¡å‹æ–‡ä»¶ç›®å½•
â”œâ”€â”€ data/                           # æ•°æ®ç›®å½•
â”œâ”€â”€ results/                        # ç»“æœæ–‡ä»¶ç›®å½•
â”œâ”€â”€ test_data_mnist/                # çœŸå®MNISTæµ‹è¯•æ•°æ®ç›®å½•
â”œâ”€â”€ run_tutorial.py                 # æ•™å­¦è„šæœ¬
â”œâ”€â”€ compare_languages.py            # åŸºç¡€ç‰ˆæœ¬æ€§èƒ½å¯¹æ¯”è„šæœ¬
â”œâ”€â”€ compare_common_data.py          # å…±åŒæ•°æ®æ€§èƒ½å¯¹æ¯”è„šæœ¬
â”œâ”€â”€ compare_mnist_results.py        # çœŸå®MNISTæ•°æ®å¯¹æ¯”è„šæœ¬
â”œâ”€â”€ generate_common_test_data.py    # ç”Ÿæˆå…±åŒæµ‹è¯•æ•°æ®è„šæœ¬
â”œâ”€â”€ mnist_data_loader.py            # çœŸå®MNISTæ•°æ®åŠ è½½è„šæœ¬
â””â”€â”€ ä½¿ç”¨è¯´æ˜.md                     # æœ¬æ–‡ä»¶
```

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šäº¤äº’å¼æ•™å­¦ï¼ˆæ¨èï¼‰

ç›´æ¥è¿è¡Œæ•™å­¦è„šæœ¬ï¼Œå®ƒä¼šä¸€æ­¥ä¸€æ­¥å¼•å¯¼æ‚¨å®Œæˆæ•´ä¸ªæµç¨‹ï¼š

```bash
python run_tutorial.py
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- æ£€æŸ¥ä¾èµ–ç¯å¢ƒ
- é€æ­¥æ‰§è¡Œæ¯ä¸ªæ­¥éª¤
- æä¾›è¯¦ç»†çš„è¯´æ˜å’Œé”™è¯¯å¤„ç†
- æ”¯æŒå¤±è´¥é‡è¯•

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ‰§è¡Œ

å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨æ‰§è¡Œæ¯ä¸ªæ­¥éª¤ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºï¼š

#### 1. å®‰è£…ä¾èµ–

```bash
pip install torch torchvision onnx onnxruntime numpy matplotlib Pillow
```

#### 2. è®­ç»ƒæ¨¡å‹

```bash
cd train
python train_model.py
```

#### 3. é‡åŒ–æ¨¡å‹

```bash
python quantize_model.py
```

#### 4. å¯¼å‡ºONNX

```bash
python export_onnx.py
```

#### 5. Pythonæ¨ç†æµ‹è¯•

æˆ‘ä»¬æä¾›äº†ä¸‰ç§ä¸åŒçš„æ¨ç†ç‰ˆæœ¬ï¼Œé€‚ç”¨äºä¸åŒçš„æµ‹è¯•åœºæ™¯ï¼š

**ç‰ˆæœ¬ä¸€ï¼šåŸºç¡€æ¨ç†ï¼ˆåŸå§‹ç‰ˆæœ¬ï¼‰**
```bash
cd ../inference
python python_inference.py
```
- ä½¿ç”¨éšæœºç”Ÿæˆæˆ–PILå›¾åƒæ•°æ®
- é€‚åˆå¿«é€ŸéªŒè¯æ¨¡å‹æ˜¯å¦æ­£å¸¸å·¥ä½œ
- ä¸»è¦ç”¨äºåŠŸèƒ½æµ‹è¯•

**ç‰ˆæœ¬äºŒï¼šå…±åŒæ•°æ®æ¨ç†**
```bash
# é¦–å…ˆç”Ÿæˆå…±åŒæµ‹è¯•æ•°æ®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
python generate_common_test_data.py

# è¿è¡Œå…±åŒæ•°æ®æ¨ç†
python python_inference_common.py
```
- ä½¿ç”¨é¢„å…ˆç”Ÿæˆçš„å›ºå®šæµ‹è¯•æ•°æ®é›†
- ç¡®ä¿å¤šç§è¯­è¨€ä½¿ç”¨å®Œå…¨ç›¸åŒçš„è¾“å…¥
- é€‚åˆè¯­è¨€é—´ä¸€è‡´æ€§éªŒè¯

**ç‰ˆæœ¬ä¸‰ï¼šçœŸå®MNISTæ¨ç†ï¼ˆæ¨èï¼‰**
```bash
# é¦–å…ˆç”ŸæˆçœŸå®MNISTæµ‹è¯•æ•°æ®
python mnist_data_loader.py

# è¿è¡ŒçœŸå®MNISTæ¨ç†
python python_inference_mnist.py
```
- ä½¿ç”¨çœŸå®çš„MNISTæµ‹è¯•é›†æ•°æ®
- æä¾›æœ€çœŸå®çš„æ€§èƒ½è¯„ä¼°
- ç¬¦åˆå­¦æœ¯å’Œå·¥ä¸šç•Œæ ‡å‡†

#### 6. å®‰è£…ONNX Runtime C++åº“

ä½¿ç”¨Homebrewå®‰è£…ï¼ˆæ¨èï¼‰ï¼š
```bash
brew install onnxruntime
```

æˆ–ä»å®˜ç½‘ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼š
https://github.com/microsoft/onnxruntime/releases

#### 7. ç¼–è¯‘C++ç‰ˆæœ¬

```bash
cd ../build
mkdir build_macos && cd build_macos
cmake -DCMAKE_BUILD_TYPE=Release ..
make -j4
```

#### 8. è¿è¡ŒC++æ¨ç†

åŒæ ·æä¾›ä¸‰ç§ä¸åŒç‰ˆæœ¬ï¼š

**ç‰ˆæœ¬ä¸€ï¼šåŸºç¡€æ¨ç†ï¼ˆåŸå§‹ç‰ˆæœ¬ï¼‰**
```bash
./bin/mnist_inference_cpp
```

**ç‰ˆæœ¬äºŒï¼šå…±åŒæ•°æ®æ¨ç†**
```bash
./bin/mnist_inference_cpp_common
```

**ç‰ˆæœ¬ä¸‰ï¼šçœŸå®MNISTæ¨ç†ï¼ˆæ¨èï¼‰**
```bash
./bin/mnist_inference_cpp_mnist
```

#### 9. è¿è¡ŒCè¯­è¨€æ¨ç†

å¯¹åº”çš„Cè¯­è¨€ç‰ˆæœ¬ï¼š

**ç‰ˆæœ¬ä¸€ï¼šåŸºç¡€æ¨ç†ï¼ˆåŸå§‹ç‰ˆæœ¬ï¼‰**
```bash
./bin/mnist_inference_c
```

**ç‰ˆæœ¬äºŒï¼šå…±åŒæ•°æ®æ¨ç†**
```bash
./bin/mnist_inference_c_common
```

**ç‰ˆæœ¬ä¸‰ï¼šçœŸå®MNISTæ¨ç†ï¼ˆæ¨èï¼‰**
```bash
./bin/mnist_inference_c_mnist
```

#### 10. ä¸‰ç§è¯­è¨€æ€§èƒ½å¯¹æ¯”

æ ¹æ®ä½¿ç”¨çš„æ•°æ®ç‰ˆæœ¬ï¼Œæˆ‘ä»¬æä¾›äº†ä¸åŒçš„å¯¹æ¯”è„šæœ¬ï¼š

**åŸºç¡€æ€§èƒ½å¯¹æ¯”**
```bash
cd ../..
python compare_languages.py
```
- å¯¹æ¯”åŸºç¡€ç‰ˆæœ¬çš„æ¨ç†ç»“æœ
- ä¸»è¦å…³æ³¨FPSæ€§èƒ½

**å…±åŒæ•°æ®å¯¹æ¯”**
```bash
python compare_common_data.py
```
- å¯¹æ¯”ä½¿ç”¨ç›¸åŒè¾“å…¥æ•°æ®çš„ç»“æœ
- éªŒè¯å®ç°ä¸€è‡´æ€§å’Œæ€§èƒ½å·®å¼‚

**çœŸå®MNISTæ•°æ®å¯¹æ¯”ï¼ˆæ¨èï¼‰**
```bash
python compare_mnist_results.py
```
- åŸºäºçœŸå®MNISTæµ‹è¯•æ•°æ®çš„å…¨é¢å¯¹æ¯”
- åŒ…æ‹¬å‡†ç¡®ç‡ã€æ€§èƒ½ã€é”™è¯¯æ ·æœ¬åˆ†æ
- ç”Ÿæˆè¯¦ç»†çš„å¯è§†åŒ–æŠ¥å‘Š

## å­¦ä¹ è¦ç‚¹

### 1. PyTorchæ¨¡å‹è®­ç»ƒ
- ç®€å•çš„CNNæ¶æ„è®¾è®¡
- æ•°æ®é¢„å¤„ç†å’Œå¢å¼º
- è®­ç»ƒå¾ªç¯å’ŒéªŒè¯

### 2. æ¨¡å‹é‡åŒ–
- åŠ¨æ€é‡åŒ–æŠ€æœ¯
- ç²¾åº¦vsæ€§èƒ½æƒè¡¡
- é‡åŒ–å‰åå¯¹æ¯”

### 3. ONNXå¯¼å‡º
- è·¨å¹³å°æ¨¡å‹æ ¼å¼
- æ¨¡å‹éªŒè¯å’Œæµ‹è¯•
- åŠ¨æ€ç»´åº¦æ”¯æŒ

### 4. æ¨ç†å¼•æ“ä¸æµ‹è¯•ç‰ˆæœ¬
- **åŸºç¡€ç‰ˆæœ¬**: å¿«é€ŸåŠŸèƒ½éªŒè¯ï¼Œä½¿ç”¨éšæœºæˆ–ç®€å•æ•°æ®
- **å…±åŒæ•°æ®ç‰ˆæœ¬**: å¤šè¯­è¨€ä¸€è‡´æ€§æµ‹è¯•ï¼Œä½¿ç”¨ç›¸åŒè¾“å…¥æ•°æ®
- **çœŸå®MNISTç‰ˆæœ¬**: æ ‡å‡†åŸºå‡†æµ‹è¯•ï¼Œä½¿ç”¨çœŸå®MNISTæ•°æ®é›†
- Python/C++/Cä¸‰ç§è¯­è¨€APIçš„ä½¿ç”¨
- å…¨é¢çš„æ€§èƒ½å’Œå‡†ç¡®æ€§å¯¹æ¯”åˆ†æ

### 5. è·¨å¹³å°éƒ¨ç½²
- macOSæœ¬åœ°å¼€å‘
- C++ç¼–è¯‘é…ç½®
- æ€§èƒ½ä¼˜åŒ–é€‰é¡¹

## å¸¸è§é—®é¢˜

### Q: è®­ç»ƒå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ
A: å¯ä»¥å‡å°‘epochsæ•°é‡ï¼ˆåœ¨`train_model.py`ä¸­ä¿®æ”¹ï¼‰ï¼Œæˆ–ä½¿ç”¨æ›´å°çš„æ•°æ®é›†è¿›è¡Œå¿«é€ŸéªŒè¯ã€‚

### Q: ONNX Runtimeæ‰¾ä¸åˆ°æ€ä¹ˆåŠï¼Ÿ
A: 
1. é¦–å…ˆå°è¯•`brew install onnxruntime`
2. å¦‚æœå¤±è´¥ï¼Œä»GitHubä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬
3. ç¡®ä¿è·¯å¾„é…ç½®æ­£ç¡®

### Q: C++/Cç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: 
1. æ£€æŸ¥æ˜¯å¦å®‰è£…äº†ONNX Runtime
2. ç¡®ä¿CMakeå’Œç¼–è¯‘å™¨ç‰ˆæœ¬å…¼å®¹
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. å¯¹äºCè¯­è¨€ç‰ˆæœ¬ï¼Œç¡®ä¿é“¾æ¥äº†æ•°å­¦åº“(-lm)

### Q: æ¨ç†ç»“æœä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ
A: 
1. æ£€æŸ¥é¢„å¤„ç†æ­¥éª¤æ˜¯å¦ä¸€è‡´
2. ç¡®è®¤æ•°æ®ç±»å‹å’Œç»´åº¦åŒ¹é…
3. éªŒè¯ONNXæ¨¡å‹å¯¼å‡ºæ˜¯å¦æ­£ç¡®

### Q: åº”è¯¥é€‰æ‹©å“ªç§è¯­è¨€è¿›è¡Œéƒ¨ç½²ï¼Ÿ
A: 
1. **å¼€å‘é˜¶æ®µ**: Python (å¿«é€ŸåŸå‹å’ŒéªŒè¯)
2. **ç”Ÿäº§éƒ¨ç½²**: C/C++ (é«˜æ€§èƒ½å’Œä½èµ„æºå ç”¨)
3. **è·¨å¹³å°å…¼å®¹**: Cè¯­è¨€ (æœ€å¹¿æ³›çš„å…¼å®¹æ€§)
4. **ç§»åŠ¨ç«¯**: Cè¯­è¨€ (æœ€å°çš„è¿è¡Œæ—¶ä¾èµ–)

### Q: åº”è¯¥é€‰æ‹©å“ªä¸ªæ¨ç†ç‰ˆæœ¬ï¼Ÿ
A: 
1. **åŸºç¡€ç‰ˆæœ¬**: 
   - é€‚åˆå¿«é€ŸåŠŸèƒ½éªŒè¯
   - æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ­£å¸¸åŠ è½½å’Œè¿è¡Œ
   - å¼€å‘é˜¶æ®µçš„åˆæ­¥æµ‹è¯•
2. **å…±åŒæ•°æ®ç‰ˆæœ¬**: 
   - éªŒè¯å¤šè¯­è¨€å®ç°çš„ä¸€è‡´æ€§
   - ç¡®ä¿æ‰€æœ‰è¯­è¨€äº§ç”Ÿç›¸åŒç»“æœ
   - è°ƒè¯•å’ŒéªŒè¯é˜¶æ®µä½¿ç”¨
3. **çœŸå®MNISTç‰ˆæœ¬ï¼ˆæ¨èï¼‰**: 
   - æä¾›æœ€å‡†ç¡®çš„æ€§èƒ½è¯„ä¼°
   - ä½¿ç”¨æ ‡å‡†åŸºå‡†æ•°æ®é›†
   - é€‚åˆæ­£å¼çš„æ€§èƒ½æŠ¥å‘Šå’Œæ¯”è¾ƒ
   - ç¬¦åˆå­¦æœ¯å’Œå·¥ä¸šç•Œæ ‡å‡†

### Q: ä¸‰ç§ç‰ˆæœ¬çš„æ€§èƒ½ç»“æœä¸ºä»€ä¹ˆä¸åŒï¼Ÿ
A: 
1. **æ•°æ®å·®å¼‚**: ä¸åŒç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®
2. **æ•°æ®é‡å·®å¼‚**: çœŸå®MNISTç‰ˆæœ¬æµ‹è¯•æ›´å¤šæ ·æœ¬
3. **é¢„å¤„ç†å·®å¼‚**: çœŸå®æ•°æ®éœ€è¦æ ‡å‡†åŒ–å¤„ç†
4. **è¯„ä¼°ç»´åº¦**: çœŸå®ç‰ˆæœ¬åŒ…å«å‡†ç¡®ç‡è¯„ä¼°

## æ‰©å±•å­¦ä¹ 

å®ŒæˆåŸºç¡€æ•™ç¨‹åï¼Œæ‚¨å¯ä»¥å°è¯•ï¼š

1. **æ•°æ®é›†æ‰©å±•**: 
   - ä¿®æ”¹`mnist_data_loader.py`ä½¿ç”¨æ›´å¤šæ ·æœ¬ï¼ˆ1000æˆ–10000ä¸ªï¼‰
   - æµ‹è¯•å®Œæ•´MNISTæµ‹è¯•é›†çš„æ€§èƒ½è¡¨ç°
   - åˆ†æä¸åŒæ•°æ®é‡å¯¹æ€§èƒ½çš„å½±å“

2. **è‡ªå®šä¹‰æ•°æ®æµ‹è¯•**: 
   - ä½¿ç”¨è‡ªå·±çš„æ‰‹å†™æ•°å­—å›¾ç‰‡
   - ä¿®æ”¹é¢„å¤„ç†æµç¨‹é€‚é…æ–°æ•°æ®
   - éªŒè¯æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›

3. **æ€§èƒ½æ·±åº¦åˆ†æ**: 
   - åˆ†æä¸‰ç§è¯­è¨€çš„å†…å­˜ä½¿ç”¨æƒ…å†µ
   - æµ‹è¯•å¤šçº¿ç¨‹æ¨ç†æ€§èƒ½
   - æ¯”è¾ƒä¸åŒONNX Runtimeä¼˜åŒ–é€‰é¡¹

## Android è·¨å¹³å°ç¼–è¯‘è¯¦ç»†æŒ‡å—

### ç¯å¢ƒä¾èµ–å®‰è£…

åœ¨å¼€å§‹ Android è·¨å¹³å°ç¼–è¯‘ä¹‹å‰ï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹ç¯å¢ƒå’Œå·¥å…·ï¼š

#### 1. åŸºç¡€å¼€å‘ç¯å¢ƒ

```bash
# macOS å¿…å¤‡å·¥å…·
brew install cmake ninja git wget curl

# å®‰è£… Java 11 (ONNX Runtime ç¼–è¯‘éœ€è¦)
brew install openjdk@11
export PATH="/opt/homebrew/opt/openjdk@11/bin:$PATH"
```

#### 2. Android å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£… Android NDK
brew install android-ndk
export ANDROID_NDK_HOME="/opt/homebrew/share/android-ndk"

# å®‰è£… Android SDK å‘½ä»¤è¡Œå·¥å…·
mkdir -p ~/android-sdk && cd ~/android-sdk
curl -O https://dl.google.com/android/repository/commandlinetools-mac-9477386_latest.zip
unzip commandlinetools-mac-9477386_latest.zip
mkdir -p cmdline-tools/latest
mv cmdline-tools/* cmdline-tools/latest/ 2>/dev/null || true

# è®¾ç½®ç¯å¢ƒå˜é‡
export ANDROID_SDK_ROOT=$HOME/android-sdk
export PATH=$PATH:$ANDROID_SDK_ROOT/cmdline-tools/latest/bin

# æ¥å—è®¸å¯åè®®
yes | sdkmanager --licenses
```

#### 3. Python å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£… Python ä¾èµ–
pip install torch torchvision onnx onnxruntime numpy matplotlib Pillow
```

### ONNX Runtime Android ç‰ˆæœ¬ç¼–è¯‘

è¿™æ˜¯æ•´ä¸ªæµç¨‹ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œéœ€è¦ä»æºç ç¼–è¯‘ ONNX Runtime çš„ Android ç‰ˆæœ¬ã€‚

#### 1. å…‹éš† ONNX Runtime æºç 

```bash
cd /Users/mintisan/Workplaces  # æˆ–æ‚¨çš„å·¥ä½œç›®å½•
git clone --recursive https://github.com/Microsoft/onnxruntime.git
cd onnxruntime
```

#### 2. ç¼–è¯‘ Android ç‰ˆæœ¬ (é¢„è®¡ 30-60 åˆ†é’Ÿ)

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export ANDROID_NDK_HOME="/opt/homebrew/share/android-ndk"
export ANDROID_SDK_ROOT="$HOME/android-sdk"
export PATH="/opt/homebrew/opt/openjdk@11/bin:$PATH"

# å¼€å§‹ç¼–è¯‘ (è¿™æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹)
./build.sh --android \
  --android_abi arm64-v8a \
  --android_api 21 \
  --android_sdk_path $ANDROID_SDK_ROOT \
  --android_ndk_path $ANDROID_NDK_HOME \
  --config Release \
  --minimal_build \
  --cmake_extra_defines onnxruntime_USE_KLEIDIAI=OFF
```

#### 3. éªŒè¯ç¼–è¯‘ç»“æœ

```bash
# æ£€æŸ¥ç”Ÿæˆçš„åº“æ–‡ä»¶
ls -la build/Android/Release/libonnxruntime_*.a

# åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶:
# libonnxruntime_session.a
# libonnxruntime_providers.a  
# libonnxruntime_framework.a
# libonnxruntime_graph.a
# ç­‰ç­‰...
```

### Android é¡¹ç›®ç¼–è¯‘æ­¥éª¤

#### 1. å‡†å¤‡é¡¹ç›®ç¯å¢ƒ

```bash
cd /path/to/DL2C  # è¿”å›åˆ°æ‚¨çš„é¡¹ç›®ç›®å½•

# ç¡®ä¿å·²å®Œæˆæœ¬åœ°è®­ç»ƒå’Œæ¨¡å‹å¯¼å‡º
python train/train_model.py
python train/export_onnx.py

# ç”Ÿæˆæµ‹è¯•æ•°æ®
python mnist_data_loader.py
```

#### 2. æ‰§è¡Œ Android äº¤å‰ç¼–è¯‘

```bash
cd build

# æ–¹æ¡ˆä¸€: ä½¿ç”¨çœŸå® ONNX Runtime (å¤æ‚ä½†åŠŸèƒ½å®Œæ•´)
export ANDROID_NDK_HOME="/opt/homebrew/share/android-ndk"
export PATH="/opt/homebrew/opt/openjdk@11/bin:$PATH"
./build_android_real_onnx.sh

# æ–¹æ¡ˆäºŒ: ä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬ (æ¨èç”¨äºå­¦ä¹ å’ŒéªŒè¯)
./build_android_simple.sh
```

#### 3. éƒ¨ç½²åˆ° Android è®¾å¤‡

```bash
# è¿æ¥ Android è®¾å¤‡å¹¶å¼€å¯å¼€å‘è€…é€‰é¡¹ä¸­çš„ USB è°ƒè¯•
adb devices  # ç¡®è®¤è®¾å¤‡å·²è¿æ¥

# éƒ¨ç½²å’Œæµ‹è¯•
./deploy_and_test_simple.sh  # æˆ– ./deploy_and_test_real_onnx.sh
```

### ç¼–è¯‘è¿‡ç¨‹è¯¦è§£

#### CMake é…ç½®å‚æ•°è¯´æ˜

```cmake
# Android ä¸“ç”¨é…ç½®
-DCMAKE_TOOLCHAIN_FILE="$ANDROID_NDK_HOME/build/cmake/android.toolchain.cmake"
-DANDROID_ABI=arm64-v8a          # ç›®æ ‡æ¶æ„
-DANDROID_NATIVE_API_LEVEL=21    # æœ€ä½ API çº§åˆ«
-DCMAKE_BUILD_TYPE=Release       # å‘å¸ƒç‰ˆæœ¬ä¼˜åŒ–
-DCMAKE_CXX_STANDARD=17          # C++ æ ‡å‡†
```

#### é“¾æ¥åº“ä¾èµ–é¡ºåº

ONNX Runtime çš„é“¾æ¥é¡ºåºéå¸¸é‡è¦ï¼Œé”™è¯¯çš„é¡ºåºä¼šå¯¼è‡´é“¾æ¥å¤±è´¥ï¼š

```cmake
# æ­£ç¡®çš„é“¾æ¥é¡ºåº
libonnxruntime_session.a      # ä¼šè¯ç®¡ç†
libonnxruntime_providers.a    # æ‰§è¡Œæä¾›è€… (æœ€å¤§çš„åº“)
libonnxruntime_framework.a    # æ ¸å¿ƒæ¡†æ¶
libonnxruntime_graph.a        # å›¾æ“ä½œ
libonnxruntime_optimizer.a    # ä¼˜åŒ–å™¨
libonnxruntime_util.a         # å·¥å…·å‡½æ•°
libonnxruntime_mlas.a         # æ•°å­¦åº“
libonnxruntime_common.a       # é€šç”¨ç»„ä»¶
# ... ç¬¬ä¸‰æ–¹åº“
```

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 1. NDK ç‰ˆæœ¬å…¼å®¹æ€§

```bash
# å¦‚æœé‡åˆ°ç¼–è¯‘é”™è¯¯ï¼Œå°è¯•ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„ NDK
# æ¨èä½¿ç”¨ NDK 25 æˆ–æ›´æ–°ç‰ˆæœ¬
brew uninstall android-ndk
# æ‰‹åŠ¨ä¸‹è½½å¹¶å®‰è£…ç‰¹å®šç‰ˆæœ¬
```

#### 2. å†…å­˜ä¸è¶³

```bash
# ONNX Runtime ç¼–è¯‘éœ€è¦å¤§é‡å†…å­˜ (å»ºè®® 8GB+)
# å¦‚æœå†…å­˜ä¸è¶³ï¼Œå‡å°‘å¹¶è¡Œç¼–è¯‘çº¿ç¨‹
make -j2  # è€Œä¸æ˜¯ make -j4
```

#### 3. ä¾èµ–åº“ç¼ºå¤±

```bash
# ç¡®ä¿æ‰€æœ‰ä¾èµ–åº“éƒ½æ­£ç¡®å®‰è£…
brew list | grep -E "(cmake|ninja|protobuf)"

# å¦‚æœç¼ºå¤±ï¼Œé‡æ–°å®‰è£…
brew install cmake ninja protobuf
```

#### 4. é“¾æ¥é”™è¯¯

```bash
# å¦‚æœé‡åˆ°é“¾æ¥é”™è¯¯ï¼Œæ£€æŸ¥åº“çš„å®Œæ•´æ€§
find /Users/mintisan/Workplaces/onnxruntime/build/Android/Release -name "*.a" -exec ls -la {} \;

# ç¡®ä¿æ‰€æœ‰ .a æ–‡ä»¶éƒ½å­˜åœ¨ä¸”å¤§å°åˆç† (ä¸ä¸º 0)
```

### Android è·¨å¹³å°ç¼–è¯‘ä¾èµ–å…³ç³»å›¾

Android è·¨å¹³å°ç¼–è¯‘æ¶‰åŠå¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œä¸‹å›¾å±•ç¤ºäº†å®Œæ•´çš„ä¾èµ–ç»“æ„ï¼š

```mermaid
graph TB
    %% ç¯å¢ƒä¾èµ–å±‚
    subgraph ENV["ğŸ”§ ç¯å¢ƒä¾èµ–å±‚"]
        direction TB
        macOS["macOS Apple Silicon"]
        brew["Homebrew åŒ…ç®¡ç†å™¨"]
        java["Java 11 OpenJDK"]
        cmake["CMake + Ninja"]
        git["Git + å¼€å‘å·¥å…·"]
        
        macOS --> brew
        brew --> java
        brew --> cmake 
        brew --> git
    end
    
    %% Android å·¥å…·é“¾
    subgraph ANDROID["ğŸ“± Android å·¥å…·é“¾"]
        direction TB
        ndk["Android NDK<br/>(Clang 19.0.1)"]
        sdk["Android SDK<br/>(å‘½ä»¤è¡Œå·¥å…·)"]
        toolchain["android.toolchain.cmake"]
        
        ndk --> toolchain
        sdk --> ndk
    end
    
    %% Python ç¯å¢ƒ
    subgraph PYTHON["ğŸ Python ç¯å¢ƒ"]
        direction TB
        pytorch["PyTorch"]
        onnx["ONNX"]
        onnxrt["ONNX Runtime"]
        numpy["NumPy + å…¶ä»–åº“"]
        
        pytorch --> onnx
        onnx --> onnxrt
    end
    
    %% æºç å±‚
    subgraph SOURCE["ğŸ“¦ æºç ç¼–è¯‘å±‚"]
        direction TB
        ort_src["ONNX Runtime æºç <br/>(~2GB, é€’å½’å…‹éš†)"]
        dl2c_src["DL2C é¡¹ç›®æºç "]
        
        subgraph ORT_BUILD["ONNX Runtime ç¼–è¯‘<br/>(30-60åˆ†é’Ÿ)"]
            direction LR
            config["CMake é…ç½®<br/>--android"]
            compile["ç¼–è¯‘<br/>(ARM64)"]
            libs["ç”Ÿæˆé™æ€åº“<br/>(.a æ–‡ä»¶)"]
            
            config --> compile --> libs
        end
        
        ort_src --> ORT_BUILD
    end
    
    %% åº“ä¾èµ–å±‚ (å¤æ‚ï¼)
    subgraph LIBS["ğŸ“š åº“ä¾èµ–å±‚ (æŒ‰é“¾æ¥é¡ºåº)"]
        direction TB
        
        subgraph ONNX_LIBS["ONNX Runtime æ ¸å¿ƒåº“"]
            direction TB
            session["libonnxruntime_session.a<br/>(ä¼šè¯ç®¡ç†)"]
            providers["libonnxruntime_providers.a<br/>(æ‰§è¡Œæä¾›è€… - æœ€å¤§ 45MB)"]
            framework["libonnxruntime_framework.a<br/>(æ ¸å¿ƒæ¡†æ¶)"]
            graph_ops["libonnxruntime_graph.a<br/>(å›¾æ“ä½œ)"]
            optimizer["libonnxruntime_optimizer.a<br/>(ä¼˜åŒ–å™¨)"]
            util["libonnxruntime_util.a<br/>(å·¥å…·å‡½æ•°)"]
            mlas["libonnxruntime_mlas.a<br/>(æ•°å­¦åº“)"]
            common["libonnxruntime_common.a<br/>(é€šç”¨ç»„ä»¶)"]
            
            session --> providers
            providers --> framework
            framework --> graph_ops
            graph_ops --> optimizer
            optimizer --> util
            util --> mlas
            mlas --> common
        end
        
        subgraph THIRD_PARTY["ç¬¬ä¸‰æ–¹ä¾èµ–åº“"]
            direction TB
            onnx_lib["libonnx.a<br/>(ONNX åè®®)"]
            protobuf["libprotobuf-lite.a<br/>(åºåˆ—åŒ–)"]
            cpuinfo["libcpuinfo.a<br/>(CPU æ£€æµ‹)"]
            re2["libre2.a<br/>(æ­£åˆ™è¡¨è¾¾å¼)"]
            abseil["Abseil C++ åº“<br/>(Google åŸºç¡€åº“)"]
            
            onnx_lib --> protobuf
            protobuf --> cpuinfo
            cpuinfo --> re2
            re2 --> abseil
        end
        
        ONNX_LIBS --> THIRD_PARTY
    end
    
    %% ç¼–è¯‘æ„å»ºå±‚
    subgraph BUILD["ğŸ”¨ ç¼–è¯‘æ„å»ºå±‚"]
        direction TB
        
        subgraph SIMPLE["ç®€åŒ–ç‰ˆæœ¬ (æ¨èå­¦ä¹ )"]
            direction LR
            simple_cpp["simple_android_inference.cpp"]
            simple_c["simple_android_inference.c"]
            simple_build["CMake + NDK<br/>äº¤å‰ç¼–è¯‘"]
            simple_exe["ARM64 å¯æ‰§è¡Œæ–‡ä»¶<br/>(~50KB)"]
            
            simple_cpp --> simple_build
            simple_c --> simple_build
            simple_build --> simple_exe
        end
        
        subgraph REAL["çœŸå® ONNX ç‰ˆæœ¬"]
            direction LR
            real_cpp["android_real_onnx_inference.cpp"]
            real_cmake["å¤æ‚ CMake é…ç½®<br/>(é“¾æ¥æ‰€æœ‰åº“)"]
            real_exe["å®Œæ•´åŠŸèƒ½å¯æ‰§è¡Œæ–‡ä»¶<br/>(~20MB+)"]
            
            real_cpp --> real_cmake
            real_cmake --> real_exe
        end
    end
    
    %% éƒ¨ç½²å±‚
    subgraph DEPLOY["ğŸš€ éƒ¨ç½²è¿è¡Œå±‚"]
        direction TB
        adb["ADB å·¥å…·"]
        device["Android è®¾å¤‡<br/>(ARM64, API 21+)"]
        push["æ–‡ä»¶æ¨é€<br/>(æ¨¡å‹+å¯æ‰§è¡Œæ–‡ä»¶)"]
        execute["è®¾å¤‡ä¸Šæ‰§è¡Œ<br/>æ¨ç†æµ‹è¯•"]
        results["æ€§èƒ½ç»“æœ<br/>å¯¹æ¯”åˆ†æ"]
        
        adb --> device
        device --> push
        push --> execute
        execute --> results
    end
    
    %% ä¾èµ–å…³ç³»è¿æ¥
    ENV --> ANDROID
    ENV --> PYTHON
    ANDROID --> SOURCE
    PYTHON --> SOURCE
    SOURCE --> LIBS
    LIBS --> BUILD
    BUILD --> DEPLOY
    
    %% å¤æ‚åº¦æ ‡æ³¨
    classDef simple fill:#90EE90,stroke:#333,stroke-width:2px
    classDef complex fill:#FFB6C1,stroke:#333,stroke-width:2px
    classDef critical fill:#FFD700,stroke:#333,stroke-width:2px
    
    class SIMPLE simple
    class LIBS,ORT_BUILD complex
    class ANDROID,DEPLOY critical
```

#### å¤æ‚åº¦åˆ†æ

ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒAndroid è·¨å¹³å°ç¼–è¯‘ç¡®å®éå¸¸å¤æ‚ï¼Œä¸»è¦ä½“ç°åœ¨ï¼š

1. **ğŸ”§ ç¯å¢ƒä¾èµ–å±‚ (é»„è‰² - å…³é”®)**
   - éœ€è¦æ­£ç¡®é…ç½® macOS å¼€å‘ç¯å¢ƒ
   - Homebrew åŒ…ç®¡ç†å™¨å®‰è£…å¤šä¸ªå·¥å…·
   - Java 11 æ˜¯ ONNX Runtime ç¼–è¯‘çš„ç¡¬æ€§è¦æ±‚

2. **ğŸ“± Android å·¥å…·é“¾ (é»„è‰² - å…³é”®)**
   - NDK ç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚ä¸¥æ ¼
   - SDK å‘½ä»¤è¡Œå·¥å…·é…ç½®å¤æ‚
   - äº¤å‰ç¼–è¯‘å·¥å…·é“¾è®¾ç½®å®¹æ˜“å‡ºé”™

3. **ğŸ“š åº“ä¾èµ–å±‚ (çº¢è‰² - æœ€å¤æ‚)**
   - **10+ ä¸ª ONNX Runtime æ ¸å¿ƒåº“**ï¼Œé“¾æ¥é¡ºåºå…³é”®
   - **5+ ä¸ªç¬¬ä¸‰æ–¹åº“**ï¼Œç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚
   - `libonnxruntime_providers.a` å•ä¸ªæ–‡ä»¶å¯è¾¾ 45MB
   - Abseil C++ åº“åŒ…å«æ•°åä¸ªå­åº“

4. **ğŸ“¦ æºç ç¼–è¯‘å±‚ (çº¢è‰² - è€—æ—¶)**
   - ONNX Runtime æºç çº¦ 2GB
   - ç¼–è¯‘æ—¶é—´ 30-60 åˆ†é’Ÿ
   - éœ€è¦ 8GB+ å†…å­˜

5. **ğŸ”¨ ç¼–è¯‘æ„å»ºå±‚**
   - **ç®€åŒ–ç‰ˆæœ¬ (ç»¿è‰² - æ¨è)**: é€‚åˆå­¦ä¹ å’ŒéªŒè¯
   - **çœŸå®ç‰ˆæœ¬**: åŠŸèƒ½å®Œæ•´ä½†å¤æ‚åº¦é«˜

6. **ğŸš€ éƒ¨ç½²è¿è¡Œå±‚ (é»„è‰² - å…³é”®)**
   - éœ€è¦ Android è®¾å¤‡å’Œ ADB å·¥å…·
   - æ–‡ä»¶ä¼ è¾“å’Œæƒé™ç®¡ç†
   - è·¨å¹³å°ç»“æœéªŒè¯

#### ä¸ºä»€ä¹ˆé€‰æ‹©ç®€åŒ–ç‰ˆæœ¬ï¼Ÿ

åŸºäºå¤æ‚åº¦åˆ†æï¼Œæˆ‘ä»¬æä¾›äº†ä¸¤ç§æ–¹æ¡ˆï¼š

| ç‰¹æ€§ | ç®€åŒ–ç‰ˆæœ¬ âœ… | çœŸå® ONNX ç‰ˆæœ¬ âš ï¸ |
|------|-------------|-------------------|
| **ç¼–è¯‘æ—¶é—´** | < 5 åˆ†é’Ÿ | 30-60 åˆ†é’Ÿ |
| **ä¾èµ–å¤æ‚åº¦** | ä½ | æé«˜ |
| **æ–‡ä»¶å¤§å°** | ~50KB | ~20MB+ |
| **å­¦ä¹ ä»·å€¼** | é«˜ (ä¸“æ³¨æ ¸å¿ƒæ¦‚å¿µ) | é«˜ (å®Œæ•´å·¥ä¸šå®è·µ) |
| **ç»´æŠ¤éš¾åº¦** | ä½ | é«˜ |
| **æˆåŠŸç‡** | 95%+ | 70% (ä¾èµ–é—®é¢˜) |

#### æ¨èå­¦ä¹ è·¯å¾„

1. **ç¬¬ä¸€é˜¶æ®µ**: ä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬ç†è§£æ ¸å¿ƒæ¦‚å¿µ
2. **ç¬¬äºŒé˜¶æ®µ**: å°è¯•çœŸå® ONNX ç‰ˆæœ¬ï¼Œä½“éªŒå·¥ä¸šçº§å¤æ‚åº¦
3. **ç¬¬ä¸‰é˜¶æ®µ**: æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚æ–¹æ¡ˆ

### æ€§èƒ½è°ƒä¼˜å»ºè®®

#### 1. ç¼–è¯‘ä¼˜åŒ–é€‰é¡¹

```cmake
# æ·»åŠ æ›´æ¿€è¿›çš„ä¼˜åŒ–é€‰é¡¹
target_compile_options(android_inference PRIVATE
    -O3                    # æœ€é«˜ä¼˜åŒ–çº§åˆ«
    -ffast-math           # å¿«é€Ÿæ•°å­¦è¿ç®—
    -ffunction-sections   # å‡½æ•°çº§åˆ«ä¼˜åŒ–
    -fdata-sections       # æ•°æ®çº§åˆ«ä¼˜åŒ–
    -DNDEBUG              # ç¦ç”¨è°ƒè¯•ä¿¡æ¯
)
```

#### 2. é“¾æ¥æ—¶ä¼˜åŒ–

```cmake
target_link_options(android_inference PRIVATE
    -Wl,--gc-sections     # ç§»é™¤æœªä½¿ç”¨çš„ä»£ç 
    -flto                 # é“¾æ¥æ—¶ä¼˜åŒ– (å¦‚æœæ”¯æŒ)
    -static-libstdc++     # é™æ€é“¾æ¥æ ‡å‡†åº“
)
```

4. **Android/ç§»åŠ¨ç«¯éƒ¨ç½²é«˜çº§åŠŸèƒ½**: 
   - é›†æˆåˆ° Android Studio é¡¹ç›®
   - åˆ›å»º JNI æ¥å£ç”¨äº Java è°ƒç”¨
   - å¼€å‘å®æ—¶ç›¸æœºè¯†åˆ«åº”ç”¨
   - æ·»åŠ  GPU åŠ é€Ÿæ”¯æŒ (OpenCL/Vulkan)

5. **æ¨¡å‹ä¼˜åŒ–å®éªŒ**: 
   - å°è¯•ä¸åŒçš„é‡åŒ–æ–¹æ³•
   - ä½¿ç”¨ONNXä¼˜åŒ–å·¥å…·
   - æ¯”è¾ƒæ¨¡å‹å¤§å°å’Œç²¾åº¦æƒè¡¡

6. **å®é™…åº”ç”¨å¼€å‘**: 
   - é›†æˆåˆ°æ‰‹æœºæˆ–Webåº”ç”¨
   - å¼€å‘å®æ—¶æ‰‹å†™æ•°å­—è¯†åˆ«ç³»ç»Ÿ
   - æ·»åŠ ç”¨æˆ·ç•Œé¢å’Œäº¤äº’åŠŸèƒ½

## æŠ€æœ¯æ ˆ

- **è®­ç»ƒæ¡†æ¶**: PyTorch
- **æ¨ç†å¼•æ“**: ONNX Runtime
- **ç¼–ç¨‹è¯­è¨€**: Python, C++
- **æ„å»ºç³»ç»Ÿ**: CMake
- **å¹³å°æ”¯æŒ**: macOS, Linux, Android

## å‚è€ƒèµ„æº

- [PyTorchå®˜æ–¹æ–‡æ¡£](https://pytorch.org/docs/)
- [ONNX Runtimeæ–‡æ¡£](https://onnxruntime.ai/docs/)
- [ONNXæ ¼å¼è§„èŒƒ](https://onnx.ai/)
- [CMakeæ•™ç¨‹](https://cmake.org/cmake/help/latest/guide/tutorial/)

ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼ğŸ“ 

### Android è·¨å¹³å°éƒ¨ç½²ï¼ˆçœŸå®ONNXç‰ˆæœ¬æ¨èï¼‰

#### 1. ç¯å¢ƒå‡†å¤‡

```bash
brew install cmake ninja git wget curl openjdk@11 android-ndk
export ANDROID_NDK_HOME="/opt/homebrew/share/android-ndk"
export ANDROID_SDK_ROOT="$HOME/android-sdk"
export PATH="/opt/homebrew/opt/openjdk@11/bin:$PATH"
```

#### 2. ç¼–è¯‘ONNX Runtimeï¼ˆå®Œæ•´ONNXæ”¯æŒï¼‰

```bash
cd ~/Workplaces
# å¦‚æœªå…‹éš†è¯·æ‰§è¡Œï¼š
git clone --recursive https://github.com/Microsoft/onnxruntime.git
cd onnxruntime

# ç¼–è¯‘ï¼ˆå»æ‰--minimal_buildï¼Œç¡®ä¿æ”¯æŒå®Œæ•´ONNXæ¨¡å‹ï¼‰
./build.sh --android \
  --android_abi arm64-v8a \
  --android_api 21 \
  --android_sdk_path $ANDROID_SDK_ROOT \
  --android_ndk_path $ANDROID_NDK_HOME \
  --config Release \
  --cmake_extra_defines onnxruntime_USE_KLEIDIAI=OFF
```

ç¼–è¯‘å®Œæˆåï¼Œç¡®è®¤`build/Android/Release/`ä¸‹æœ‰`libonnxruntime_session.a`ç­‰é™æ€åº“ã€‚

#### 3. æ•°æ®ä¸æ¨¡å‹å‡†å¤‡

```bash
# ç”ŸæˆMNISTæµ‹è¯•æ•°æ®å’Œæ¨¡å‹
python train/train_model.py
python train/export_onnx.py
python mnist_data_loader.py
```
ç¡®ä¿`models/mnist_model.onnx`å’Œ`test_data_mnist/`ç›®å½•ä¸‹æœ‰æ•°æ®å’Œ`metadata.json`ã€‚

#### 4. ç¼–è¯‘Androidæ¨ç†ç¨‹åº

```bash
cd build
export ANDROID_NDK_HOME="/opt/homebrew/share/android-ndk"
export PATH="/opt/homebrew/opt/openjdk@11/bin:$PATH"
./build_android_real_onnx.sh
```

ç¼–è¯‘æˆåŠŸåï¼Œ`android_executables/arm64-v8a/android_real_onnx_inference`ä¸ºå¯éƒ¨ç½²æ–‡ä»¶ã€‚

#### 5. éƒ¨ç½²ä¸æµ‹è¯•

```bash
# ç¡®ä¿è®¾å¤‡å·²è¿æ¥å¹¶å¼€å¯USBè°ƒè¯•
adb devices

# éƒ¨ç½²å¹¶è‡ªåŠ¨æµ‹è¯•
./deploy_and_test_real_onnx.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨æ¨é€å¯æ‰§è¡Œæ–‡ä»¶ã€æ¨¡å‹ã€æµ‹è¯•æ•°æ®åˆ°è®¾å¤‡å¹¶è¿è¡Œæ¨ç†ï¼Œç»“æœä¼šæ‹‰å›åˆ°`results/`ç›®å½•ã€‚

#### 6. ç»“æœå¯¹é½ä¸éªŒè¯

- **Androidä¸macOSæœ¬åœ°C++æ¨ç†ç»“æœåº”é«˜åº¦ä¸€è‡´ï¼ˆå‡†ç¡®ç‡90%+ï¼‰**
- **å¦‚å‡†ç¡®ç‡å¼‚å¸¸ï¼ˆå¦‚20%ï¼‰ï¼Œè¯·æ£€æŸ¥ï¼š**
  - Androidç«¯æ˜¯å¦åªè¯»å–784ä¸ªfloatå›¾åƒæ•°æ®ï¼Œæ ‡ç­¾éœ€ä»`metadata.json`è·å–
  - æ•°æ®æ–‡ä»¶æ ¼å¼ä¸æœ¬åœ°ä¸€è‡´
  - ONNX Runtimeç¼–è¯‘å‚æ•°æ˜¯å¦æ­£ç¡®ï¼ˆæ— minimal_buildï¼‰

#### 7. æ€§èƒ½å¯¹æ¯”ä¸åˆ†æ

```bash
python3 android_cross_platform_analysis.py
```

è‡ªåŠ¨ç”Ÿæˆ`results/android_cross_platform_final_report.md`å’Œæ€§èƒ½å¯¹æ¯”å›¾ã€‚

---

#### å¸¸è§é—®é¢˜è¡¥å……

- **Q: Androidæ¨ç†å‡†ç¡®ç‡è¿œä½äºæœ¬åœ°ï¼Ÿ**
  - æ£€æŸ¥æ¨ç†ä»£ç æ˜¯å¦æ­£ç¡®è¯»å–æ ‡ç­¾ï¼ˆä¸èƒ½ä»äºŒè¿›åˆ¶æ–‡ä»¶å¤´éƒ¨è¯»å–æ ‡ç­¾ï¼Œéœ€ç”¨metadata.jsonï¼‰
  - æ£€æŸ¥æ•°æ®æ–‡ä»¶æ ¼å¼æ˜¯å¦ä¸€è‡´
  - æ£€æŸ¥ONNX Runtimeæ˜¯å¦ä¸ºå®Œæ•´ç‰ˆ 